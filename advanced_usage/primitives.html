

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Primitives &mdash; MLBlocks 0.3.0-dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hyperparameters" href="hyperparameters.html" />
    <link rel="prev" title="Quickstart" href="../getting_started/quickstart.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MLBlocks
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">What is MLBlocks?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Primitives</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-primitive">What is a Primitive?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-annotations">JSON Annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-primitives">Function Primitives</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-primitives">Class Primitives</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-mlblock-class">The MLBlock Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hyperparameters.html">Hyperparameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hyperparameters.html#fixed-hyperparameters">Fixed Hyperparameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="hyperparameters.html#tunable-hyperparameters">Tunable Hyperparameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hyperparameters.html#special-hyperparameter-types">Special Hyperparameter Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="hyperparameters.html#multitype-hyperparameters">Multitype Hyperparameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperparameters.html#conditional-hyperparameters">Conditional Hyperparameters</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html#what-is-a-pipeline">What is a Pipeline?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html#the-mlpipeline-class">The MLPipeline Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html#block-names">Block Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html#init-arguments">Init Arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html#context">Context</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html#context-usage-examples">Context Usage Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html#json-annotations">JSON Annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html#representing-a-pipeline-as-a-dict">Representing a  Pipeline as a dict</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipelines.html#loading-a-pipeline-from-a-dict">Loading a Pipeline from a dict</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="adding_primitives.html">Adding Primitives</a><ul>
<li class="toctree-l2"><a class="reference internal" href="adding_primitives.html#mlprimitives">MLPrimitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_primitives.html#writing-primitives">Writing Primitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_primitives.html#primitives-lookup">Primitives Lookup</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_primitives.html#adding-a-primitives-folder">Adding a Primitives Folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_primitives.html#developing-a-primitives-library">Developing a Primitives Library</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Pipeline Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_examples/single_table.html">Single Table Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/single_table.html#regression-pipeline">Regression Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/single_table.html#classification-pipeline">Classification Pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_examples/multi_table.html">Multi Table Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/multi_table.html#multi-table-classification-pipeline">Multi Table Classification Pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_examples/text.html">Text Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/text.html#text-classification">Text Classification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline_examples/text.html#mlprimitives-keras-preprocessing-keras-lstm">MLPrimitives + Keras Preprocessing + Keras LSTM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/text.html#tabular-data-with-text">Tabular Data with Text</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline_examples/text.html#mlprimitives-scikit-learn-randomforestclassifier">MLPrimitives + Scikit-learn RandomForestClassifier</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_examples/image.html">Image Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/image.html#image-classification">Image Classification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline_examples/image.html#opencv-gaussianblur-scikit-image-hog-scikit-learn-randomforestclassifier">OpenCV GaussianBlur + Scikit-image HOG + Scikit-Learn RandomForestClassifier</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/image.html#opencv-gaussianblur-keras-single-layer-cnn">OpenCV GaussianBlur + Keras Single Layer CNN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/image.html#image-regression">Image Regression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline_examples/image.html#keras-mobilenet-xgbregressor">Keras MobileNet + XGBRegressor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_examples/graph.html">Graph Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_examples/graph.html#link-prediction">Link Prediction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline_examples/graph.html#networkx-mlprimitives-scikit-learn-xgboost">NetworkX + MLPrimitives + Scikit-learn + XGBoost</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/mlblocks.html">mlblocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/mlblocks.datasets.html">mlblocks.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/mlblocks.primitives.html">mlblocks.primitives</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MLBlocks</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Primitives</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/HDI-Project/MLBlocks/blob/master/docs/advanced_usage/primitives.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="primitives">
<h1>Primitives<a class="headerlink" href="#primitives" title="Permalink to this headline">¶</a></h1>
<p>MLBlocks goal is to seamlessly combine any possible set of Machine Learning tools developed
in Python, whether they are custom developments or belong to third party libraries, and
build <a class="reference external" href="pipelines.html">pipelines</a> out of them that can be fitted and then used to make predictions.</p>
<p>We call each one of these Machine Learning tools a <strong>primitive</strong>.</p>
<div class="section" id="what-is-a-primitive">
<h2>What is a Primitive?<a class="headerlink" href="#what-is-a-primitive" title="Permalink to this headline">¶</a></h2>
<p>A valid MLBlocks primitive is an importable Python object that:</p>
<ul class="simple">
<li>Must be either a function or a class.</li>
<li>If it is a class, it <strong>might</strong> have a <cite>fitting</cite> stage, where the primitive is passed some
training data and it <cite>learns</cite> from it, and which can be executed with a single method call.
Function primitives have no <cite>fitting</cite> stage.</li>
<li><strong>Must</strong> have a <cite>producing</cite> stage, where the primitive is passed some data and it returns some
other data, whether it is a transformation of the input data or some new data derived from it,
such as a set of predictions. This <cite>producing</cite> stage must be executed with a single function or
method call.</li>
<li>Might have <a class="reference external" href="hyperparameters.html">hyperparameters</a>, additional arguments to be passed to either the function call or
the class constructor in order to alter or control the way the fitting and producing stages work.</li>
</ul>
<p>Here are some examples of primitives:</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="12%" />
<col width="15%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">primitive</th>
<th class="head">type</th>
<th class="head">fit</th>
<th class="head">produce</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sklearn.preprocessing.StandardScaler</td>
<td>class</td>
<td>fit</td>
<td>transform</td>
</tr>
<tr class="row-odd"><td>sklearn.ensemble.RandomForestClassifier</td>
<td>class</td>
<td>fit</td>
<td>predict</td>
</tr>
<tr class="row-even"><td>skimage.feature.hog</td>
<td>function</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>xgboost.XGBRegressor</td>
<td>class</td>
<td>fit</td>
<td>predict</td>
</tr>
<tr class="row-even"><td>keras.applications.resnet50.preprocess_input</td>
<td>function</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>keras.applications.resnet50.ResNet50</td>
<td>class</td>
<td>–</td>
<td>predict</td>
</tr>
<tr class="row-even"><td>keras.preprocessing.sequence.pad_sequences</td>
<td>function</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>keras.preprocessing.text.Tokenizer</td>
<td>class</td>
<td>fit_on_texts</td>
<td>texts_to_sequences</td>
</tr>
<tr class="row-even"><td>lightfm.LightFM</td>
<td>class</td>
<td>fit</td>
<td>predict</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="json-annotations">
<h2>JSON Annotations<a class="headerlink" href="#json-annotations" title="Permalink to this headline">¶</a></h2>
<p>Each integrated primitive has an associated JSON file that specifies its methods, their arguments,
their types and, most importantly, any possible <a class="reference external" href="hyperparameters.html">hyperparameters</a> that the primitive has, as well
as their types, ranges and conditions, if any.</p>
<p>These JSON annotations can be:</p>
<ul class="simple">
<li><strong>Installed</strong> using the <a class="reference external" href="https://github.com/HDI-Project/MLPrimitives">MLPrimitives</a> related project, which is the recommended approach.</li>
<li><strong>Created by the user</strong> and configured for MLBlocks to use them.</li>
</ul>
<p>And the primitives can be of two types:</p>
<ul class="simple">
<li>Function Primitives: Simple functions that can be called directly.</li>
<li>Class Primitives: Class objects that need to be instantiated before they can be used.</li>
</ul>
<p>Here are some simplified examples of these JSONs, but for more detailed examples, please refer to
the <a class="reference external" href="https://github.com/HDI-Project/MLBlocks/tree/master/examples">examples folder</a> of the project.</p>
<div class="section" id="function-primitives">
<h3>Function Primitives<a class="headerlink" href="#function-primitives" title="Permalink to this headline">¶</a></h3>
<p>The most simple type of primitives are simple functions that can be called directly, without
the need to created any class instance before.</p>
<p>In most cases, if not all, these functions do not have any associated learning process,
and their behavior is always the same both during the fitting and the predicting phases
of the pipeline.</p>
<p>A simple example of such a primitive would be the <code class="docutils literal notranslate"><span class="pre">numpy.argmax</span></code> function, which expects a 2
dimensional array as input, and returns a 1 dimensional array that indicates the index of the
maximum values along an axis.</p>
<p>The simplest JSON annotation for this primitive would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;primitive&quot;</span><span class="p">:</span> <span class="s2">&quot;numpy.argmax&quot;</span><span class="p">,</span>
    <span class="s2">&quot;produce&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;hyperparameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;fixed&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;axis&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The main elements of this JSON are:</p>
<ul>
<li><p class="first"><strong>primitive</strong>: The fully qualified, directly importable name of the function to be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;primitive&quot;</span><span class="p">:</span> <span class="s2">&quot;numpy.argmax&quot;</span><span class="p">,</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>produce</strong>: A nested JSON that specifies the names and types of arguments and the output values
of the primitive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;produce&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>hyperparameters</strong>: A nested JSON that specifies the <a class="reference external" href="hyperparameters.html">hyperparameters</a> of this primitive.
Note that multiple types of hyperparameters exist, but that this primitive has only one <code class="docutils literal notranslate"><span class="pre">fixed</span></code>
hyperparameter, which mean that this is not tunable and that, even though the user can specify
a value different than the default, changes are not expected during the MLBlock instance life
cycle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;hyperparameters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;fixed&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;axis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="class-primitives">
<h3>Class Primitives<a class="headerlink" href="#class-primitives" title="Permalink to this headline">¶</a></h3>
<p>A more complex type of primitives are classes which need to be instantiated before they can
be used.</p>
<p>In most cases, these classes will have an associated learning process, and they will have some
fit method or equivalent that will be called during the fitting phase but not during the
predicting one.</p>
<p>A simple example of such a primitive would be the <code class="docutils literal notranslate"><span class="pre">sklearn.preprocessing.StandardScaler</span></code> class,
which is used to standardize a set of values by calculating their z-score, which means centering
them around 0 and scaling them to unit variance.</p>
<p>This primitive has an associated learning process, where it calculates the mean and standard
deviation of the training data, to later on use them to transform the prediction data to the
same center and scale.</p>
<p>The simplest JSON annotation for this primitive would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;primitive&quot;</span><span class="p">:</span> <span class="s2">&quot;sklearn.preprocessing.StandardScaler&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fit&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;fit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;produce&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;transform&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;hyperparameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;tunable&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;with_mean&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">true</span>
            <span class="p">},</span>
            <span class="s2">&quot;with_std&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">true</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that there are some details of this JSON annotation that make it different from the
Function Primitive one that explained above:</p>
<ul>
<li><p class="first"><strong>primitive</strong>: The fully qualified, directly importable name of the class to be used. This
class is the one that will be used to create the actual primitive instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;primitive&quot;</span><span class="p">:</span> <span class="s2">&quot;sklearn.preprocessing.StandardScaler&quot;</span><span class="p">,</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>fit</strong>: A nested JSON that specifies the name of the method to call during the fitting phase,
which in this case happens to also be <code class="docutils literal notranslate"><span class="pre">fit</span></code>, as well as the names and types of
arguments that this method expects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;fit&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;fit&quot;</span><span class="p">,</span>
    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>produce</strong>: A nested JSON that specifies the name of the method to call during the predicting
phase, in this case called <code class="docutils literal notranslate"><span class="pre">transform</span></code>, as well as the names and types of
arguments that this method expects and its outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;produce&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;transform&quot;</span><span class="p">,</span>
    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ndarray&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>hyperparameters</strong>: A nested JSON that specifies the hyperparameters of this primitive.
In this case, only <code class="docutils literal notranslate"><span class="pre">tunable</span></code> hyperparameters are specified, with their
names and types. If the type was something other than <code class="docutils literal notranslate"><span class="pre">bool</span></code>, a list or
range of valid values would also be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;hyperparameters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tunable&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;with_mean&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="s2">&quot;with_std&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="the-mlblock-class">
<h2>The MLBlock Class<a class="headerlink" href="#the-mlblock-class" title="Permalink to this headline">¶</a></h2>
<p>Within the <strong>MLBlocks</strong> library, a primitive is represented through the <a class="reference external" href="../api_reference.html#mlblocks.MLBlock">mlblocks.MLBlock</a> class.</p>
<p>This is used to wrap around the annotated primitives, offering a common and uniform interface to
all of them.</p>
<p>More specifically, the <a class="reference external" href="../api_reference.html#mlblocks.MLBlock">mlblocks.MLBlock</a> class offers two public methods, <a class="reference external" href="../api_reference.html#mlblocks.MLBlock.fit">fit</a> and <a class="reference external" href="../api_reference.html#mlblocks.MLBlock.produce">produce</a>,
which are directly linked to the methods specified in the JSON Annotation:</p>
<p>For example, we can look at the <a class="reference external" href="https://github.com/HDI-Project/MLPrimitives/blob/master/mlblocks_primitives/keras.preprocessing.text.Tokenizer.json">keras.preprocessing.text.Tokenizer</a> primitive from
<a class="reference external" href="https://github.com/HDI-Project/MLPrimitives">MLPrimitives</a>, which calls the method <code class="docutils literal notranslate"><span class="pre">fit_on_texts</span></code> when <code class="docutils literal notranslate"><span class="pre">fit</span></code> is called, and
<code class="docutils literal notranslate"><span class="pre">tests_to_sequences</span></code> when <code class="docutils literal notranslate"><span class="pre">produce</span></code> is called:</p>
<div class="graphviz"><img src="../_images/graphviz-1dd149fc5db490bedf40a0b799bf98c467a75e54.png" alt="digraph {
    {
        node [shape=box]
        fit_on_texts;
        texts_to_sequences;
        fit;
        produce;
    }
    subgraph cluster_1 {
        {rank=same; fit produce};
        fit -&gt; produce [style=invis];
        fit -&gt; fit_on_texts;
        produce -&gt; texts_to_sequences;
        label = &quot;mlblocks.MLBlock&quot;;
        subgraph cluster_2 {
            fit_on_texts;
            texts_to_sequences;
            label = &quot;keras.preprocessing.text.Tokenizer&quot;;
        }
    }
}" class="graphviz" /></div>
<p>For a more detailed description of this class, please check the corresponding
section in the <a class="reference external" href="../api_reference.html">API Reference</a> documentation.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hyperparameters.html" class="btn btn-neutral float-right" title="Hyperparameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../getting_started/quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MIT Data To AI Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>